"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[237],{2637:(t,a,e)=>{e.d(a,{d:()=>n});var l=e(6827),o=e(8346);function n(t,a){l.Z.create({message:a,html:!0,color:t,position:o.Z.lt.sm?"bottom":"bottom-right"})}},8203:(t,a,e)=>{e.d(a,{Z:()=>m});var l=e(9835);function o(t,a){const e=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(e,{"no-caps":"",outline:"",color:"primary",label:"Назад",icon:"arrow_back",class:"q-mr-md",onClick:a[0]||(a[0]=a=>t.$router.back())})}var n=e(1639),u=e(8879),s=e(9984),r=e.n(s);const d={},i=(0,n.Z)(d,[["render",o]]),m=i;r()(d,"components",{QBtn:u.Z})},2237:(t,a,e)=>{e.r(a),e.d(a,{default:()=>V});var l=e(9835),o=e(6970),n=e(1957),u=e(8339),s=e(1569),r=e(499),d=e(2637),i=e(8203);const m={class:"flex items-center justify-between q-mb-md"},c={class:"no-margin text-h6 text-bold"},p={class:"text-h6 text-bold"},_={class:"info-table q-mb-lg full-width"},b=(0,l._)("tr",null,[(0,l._)("td",{class:"text-bold"},"№"),(0,l._)("td",{class:"text-bold"},"Вопрос"),(0,l._)("td",{class:"text-bold"},"План"),(0,l._)("td",{class:"text-bold"},"Факт")],-1),v={key:0,class:"q-mb-lg"},w={class:"text-h6 text-bold"},f={__name:"stress_form_for_user",setup(t){const a=(0,u.yj)(),e=(0,r.iH)({}),f=(0,r.iH)({}),g=(0,r.iH)("Не согласен"),y=["Не согласен","Согласен","Нужно обсудить"];console.log(a.params.uuid),(0,l.wF)((async()=>{await h()}));const h=async()=>{const t=await(0,s.api)(`/api/form/stress_form_data/${a.params.uuid}`);console.log(t.data),e.value=t.data,e.value.data?f.value=e.value.data:f.value=e.value.form?.default_data},q=async()=>{await s.api.patch(`/api/form/stress_form_data/${a.params.uuid}`,{data:f.value,is_done:!0,comment:g.value});(0,d.d)("positive","Данные обновлены")};return(t,a)=>{const u=(0,l.up)("q-input"),s=(0,l.up)("q-select"),r=(0,l.up)("q-btn"),d=(0,l.up)("q-form"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(i.Z),(0,l._)("p",c,"Форма ID "+(0,o.zw)(e.value.id)+" от "+(0,o.zw)(new Date(e.value.created_at).toLocaleString()),1)]),(0,l._)("p",p,(0,o.zw)(e.value.form?.name),1),(0,l.Wm)(d,{onSubmit:(0,n.iM)(q,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("table",_,[b,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.value,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",null,(0,o.zw)(a+1),1),(0,l._)("td",null,(0,o.zw)(t.label),1),(0,l._)("td",null,(0,o.zw)(t.plan_amount),1),(0,l._)("td",null,[(0,l.Wm)(u,{style:{width:"50%"},modelValue:t.fact_amount,"onUpdate:modelValue":a=>t.fact_amount=a,outlined:"","lazy-rules":"",dense:"",type:"number",readonly:!!e.value.rate,rules:[t=>null!==t&&""!==t||"Это обязательное поле"]},null,8,["modelValue","onUpdate:modelValue","readonly","rules"])])])))),128))]),e.value.rate?((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("p",w,"Оценка выполнения: "+(0,o.zw)(e.value.rate),1),(0,l.Wm)(s,{outlined:"",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),options:y,label:"Комментарий к оценке"},null,8,["modelValue"])])):(0,l.kq)("",!0),(0,l.Wm)(r,{type:"submit","no-caps":"",color:"positive",label:"Сохранить"})])),_:1},8,["onSubmit"])])),_:1})}}};var g=e(9885),y=e(8326),h=e(3119),q=e(6384),x=e(8879),Z=e(9984),k=e.n(Z);const z=f,V=z;k()(f,"components",{QPage:g.Z,QForm:y.Z,QInput:h.Z,QSelect:q.Z,QBtn:x.Z})}}]);