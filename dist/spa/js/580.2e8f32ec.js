"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[580],{8550:(e,a,l)=>{l.d(a,{Z:()=>r});var o=l(9835);const n={__name:"AddButton",props:["label","icon","loading","color"],setup(e){return(a,l)=>{const n=(0,o.up)("q-btn");return a.auth.user.role?.permission?.can_add?((0,o.wg)(),(0,o.j4)(n,{key:0,"no-caps":"",unelevated:"",loading:e.loading,color:e.color?e.color:"primary",label:e.label,icon:e.icon?e.icon:"add"},null,8,["loading","color","label","icon"])):(0,o.kq)("",!0)}}};var t=l(8879),i=l(9984),s=l.n(i);const u=n,r=u;s()(n,"components",{QBtn:t.Z})},1862:(e,a,l)=>{l.d(a,{Z:()=>r});var o=l(9835);const n={__name:"EditButton",props:["label","icon","color"],setup(e){return(a,l)=>{const n=(0,o.up)("q-btn");return a.auth.user.role?.permission?.can_edit?((0,o.wg)(),(0,o.j4)(n,{key:0,"no-caps":"",unelevated:"",color:e.color,label:e.label,icon:e.icon?e.icon:"edit"},null,8,["color","label","icon"])):(0,o.kq)("",!0)}}};var t=l(8879),i=l(9984),s=l.n(i);const u=n,r=u;s()(n,"components",{QBtn:t.Z})},7580:(e,a,l)=>{l.r(a),l.d(a,{default:()=>V});var o=l(9835),n=l(6970),t=l(499),i=l(1569),s=l(8550),u=l(1862),r=l(9876);const c={class:"flex items-center justify-between q-mb-md"},d=(0,o._)("p",{class:"no-margin text-h6 text-bold"},"Товары ",-1),p={class:"text-bold"},m={class:"q-gutter-md"},w={__name:"items",setup(e){(0,r.E)();const a=[{name:"name",align:"left",label:"Название товара",field:e=>e.name,sortable:!0}],l=(0,t.iH)(!1),w=((0,t.iH)(null),(0,t.iH)({id:null,name:null})),b={sortBy:"desc",descending:!1,page:1,rowsPerPage:25},_=(0,t.iH)([]);(0,t.iH)({q:"",role__id:""});(0,o.wF)((async()=>{await g()}));const g=async()=>{const e=await(0,i.api)("/api/material_store/item");_.value=e.data},v=async e=>{await i.api.delete(`/api/material_store/item/${e}`),await g()},q=e=>{w.value=e||{name:null},l.value=!0},Z=async()=>{w.value.id?await i.api.put(`/api/material_store/item/${w.value.id}`,w.value):await i.api.post("/api/material_store/item",w.value),l.value=!1,await g()};return(e,t)=>{const i=(0,o.up)("q-space"),r=(0,o.up)("q-th"),g=(0,o.up)("q-tr"),f=(0,o.up)("q-td"),k=(0,o.up)("q-table"),W=(0,o.up)("q-page"),h=(0,o.up)("q-input"),y=(0,o.up)("q-card-section"),Q=(0,o.up)("q-btn"),C=(0,o.up)("q-card-actions"),H=(0,o.up)("q-card"),B=(0,o.up)("q-dialog"),T=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(W,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",c,[d,(0,o.Wm)(i),(0,o.Wm)(s.Z,{icon:"add",label:"Добавить товар",onClick:t[0]||(t[0]=e=>q(null))})]),(0,o.Wm)(k,{flat:"",rows:_.value,columns:a,"row-key":"name","table-header-class":"table-header",pagination:b},{header:(0,o.w5)((e=>[(0,o.Wm)(g,{props:e,class:"bg-grey-2"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(a=>((0,o.wg)(),(0,o.j4)(r,{key:a.name,props:e},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,n.zw)(a.label),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(r,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(g,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(a=>((0,o.wg)(),(0,o.j4)(f,{key:a.name,props:e},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,n.zw)(a.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(f,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(u.Z,{dense:"",onClick:a=>q(e.row)},null,8,["onClick"]),(0,o.Wm)(s.Z,{dense:"",color:"negative",icon:"delete",onClick:a=>v(e.row.id)},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1}),(0,o.Wm)(B,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{outlined:"",label:"Введите название",modelValue:w.value.name,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value.name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(C,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{label:"Сохранить",disable:!w.value.name,"no-caps":"",color:"positive",onClick:Z},null,8,["disable"]),(0,o.wy)((0,o.Wm)(Q,{label:"Отмена","no-caps":"",color:"dark"},null,512),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var b=l(9885),_=l(136),g=l(1746),v=l(1233),q=l(1682),Z=l(7220),f=l(2074),k=l(4458),W=l(3190),h=l(3119),y=l(1821),Q=l(8879),C=l(2146),H=l(9984),B=l.n(H);const T=w,V=T;B()(w,"components",{QPage:b.Z,QSpace:_.Z,QTable:g.Z,QTr:v.Z,QTh:q.Z,QTd:Z.Z,QDialog:f.Z,QCard:k.Z,QCardSection:W.Z,QInput:h.Z,QCardActions:y.Z,QBtn:Q.Z}),B()(w,"directives",{ClosePopup:C.Z})}}]);