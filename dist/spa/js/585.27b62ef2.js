"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[585],{8585:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Z});l(2879);var a=l(9835),n=l(499),s=l(6970),d=(l(8203),l(9876)),r=l(1862),i=l(8550);const o={class:"flex items-center justify-between q-mb-md"},u=(0,a._)("p",{class:"no-margin text-h6 text-bold"},"Структура организации",-1),m={class:"flex items-center justify-between full-width"},c={class:"text-weight-bold text-primary"},w={class:"flex items-center"},f={key:0,class:"q-mb-none text-grey-9 q-mr-md"},k={key:0,class:""},p={__name:"structure",setup(e){const t=(0,d.E)(),l="https://crm.glsystem.ru",p=(0,a.Fl)((()=>t.departments)),g=(0,n.iH)("пп1");return(e,t)=>{const d=(0,a.up)("q-item-label"),_=(0,a.up)("q-item-section"),b=(0,a.up)("q-item"),y=(0,a.up)("q-list"),h=(0,a.up)("q-tree"),v=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(v,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[u,(0,a.Wm)(i.Z,{label:"Добавить",target:"_blank",href:`${(0,n.SU)(l)}/admin/user/department/add/`},null,8,["href"])]),(0,a.Wm)(h,{nodes:p.value,"node-key":"name","children-key":"divisions","label-key":"name","selected-color":"primary",selected:g.value,"onUpdate:selected":t[0]||(t[0]=e=>g.value=e),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",m,[(0,a._)("div",c,(0,s.zw)(e.node.name),1),(0,a._)("div",w,[e.node.leader?((0,a.wg)(),(0,a.iD)("p",f," Ответственный: "+(0,s.zw)(e.node.leader.fio),1)):(0,a.kq)("",!0),e.node.divisions?((0,a.wg)(),(0,a.j4)(r.Z,{key:1,icon:"edit",target:"_blank",href:`${(0,n.SU)(l)}/admin/user/department/${e.node.id}/change/`,flat:""},null,8,["href"])):(0,a.kq)("",!0)])])])),"default-body":(0,a.w5)((t=>[t.node.divisions?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(y,{separator:"",bordered:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.node.users,(t=>((0,a.wg)(),(0,a.j4)(b,{dense:"",key:t.id,clickable:"",onClick:l=>e.$router.push(`/user/${t.id}`)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[t.firstname?((0,a.wg)(),(0,a.j4)(d,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.lastname)+" "+(0,s.zw)(t.firstname)+(0,s.zw)(t.surname),1)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(d,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.username),1)])),_:2},1024))])),_:2},1024),t.role?((0,a.wg)(),(0,a.j4)(_,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.role.name),1)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(_,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)(" Роль не указана ")])),_:1}))])),_:2},1032,["onClick"])))),128))])),_:2},1024)]))])),_:1},8,["nodes","selected"])])),_:1})}}};var g=l(9885),_=l(4749),b=l(3246),y=l(490),h=l(6749),v=l(3115),q=l(9984),j=l.n(q);const x=p,Z=x;j()(p,"components",{QPage:g.Z,QTree:_.Z,QList:b.Z,QItem:y.Z,QItemSection:h.Z,QItemLabel:v.Z})}}]);