"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[237],{2237:(a,e,l)=>{l.r(e),l.d(e,{default:()=>Q});var t=l(9835),o=l(6970),u=l(1957),s=l(8339),n=l(1569),d=l(499),m=l(2637),r=l(8203);const i={class:"flex items-center justify-between q-mb-md"},c={class:"no-margin text-h6 text-bold"},_={class:"text-h6 text-bold"},p={class:"info-table q-mb-lg full-width"},b=(0,t._)("tr",null,[(0,t._)("td",{class:"text-bold"},"№"),(0,t._)("td",{class:"text-bold"},"Вопрос"),(0,t._)("td",{class:"text-bold"},"План"),(0,t._)("td",{class:"text-bold"},"Факт")],-1),v={key:0,class:"q-mb-lg"},w=(0,t._)("p",{class:"text-h6 text-bold"},"Комментарий, почему такая оценка",-1),f={key:1,class:"q-mb-lg"},g={class:"text-h6 text-bold"},y={__name:"stress_form_for_user",setup(a){const e=(0,s.yj)(),l=(0,d.iH)({}),y=(0,d.iH)({}),x=(0,d.iH)("Согласен"),h=["Согласен","Не согласен","Нужно обсудить"];console.log(e.params.uuid),(0,t.wF)((async()=>{await q()}));const q=async()=>{const a=await(0,n.api)(`/api/form/stress_form_data/${e.params.uuid}`);console.log(a.data),l.value=a.data,l.value.data?y.value=l.value.data:y.value=l.value.form?.default_data},k=async()=>{await n.api.patch(`/api/form/stress_form_data/${e.params.uuid}`,{data:y.value,is_done:!0,comment:x.value});(0,m.d)("positive","Данные обновлены")};return(a,e)=>{const s=(0,t.up)("q-input"),n=(0,t.up)("q-select"),d=(0,t.up)("q-btn"),m=(0,t.up)("q-form"),q=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(q,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(r.Z),(0,t._)("p",c,"Форма ID "+(0,o.zw)(l.value.id)+" от "+(0,o.zw)(new Date(l.value.created_at).toLocaleString()),1)]),(0,t._)("p",_,(0,o.zw)(l.value.form?.name),1),(0,t.Wm)(m,{onSubmit:(0,u.iM)(k,["prevent"])},{default:(0,t.w5)((()=>[(0,t._)("table",p,[b,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.value,((a,e)=>((0,t.wg)(),(0,t.iD)("tr",{key:e},[(0,t._)("td",null,(0,o.zw)(e+1),1),(0,t._)("td",null,(0,o.zw)(a.label),1),(0,t._)("td",null,(0,o.zw)(a.plan_amount),1),(0,t._)("td",null,[(0,t.Wm)(s,{style:{width:"50%"},modelValue:a.fact_amount,"onUpdate:modelValue":e=>a.fact_amount=e,outlined:"","lazy-rules":"",dense:"",type:"number",readonly:!!l.value.rate,rules:[a=>null!==a&&""!==a||"Это обязательное поле"]},null,8,["modelValue","onUpdate:modelValue","readonly","rules"])])])))),128))]),l.value.comment?((0,t.wg)(),(0,t.iD)("div",v,[w,(0,t._)("p",null,(0,o.zw)(l.value.comment),1)])):(0,t.kq)("",!0),l.value.rate?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("p",g,"Оценка выполнения: "+(0,o.zw)(l.value.rate),1),(0,t.Wm)(n,{outlined:"",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),options:h,label:"Комментарий к оценке"},null,8,["modelValue"])])):(0,t.kq)("",!0),(0,t.Wm)(d,{type:"submit","no-caps":"",color:"positive",label:"Сохранить"})])),_:1},8,["onSubmit"])])),_:1})}}};var x=l(9885),h=l(8326),q=l(3119),k=l(6384),z=l(8879),V=l(9984),D=l.n(V);const Z=y,Q=Z;D()(y,"components",{QPage:x.Z,QForm:h.Z,QInput:q.Z,QSelect:k.Z,QBtn:z.Z})}}]);