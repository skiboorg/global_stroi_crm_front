"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[899],{4899:(l,a,e)=>{e.r(a),e.d(a,{default:()=>P});e(2879);var t=e(9835),o=e(6970),u=e(499),n=e(6928),s=e(1569);const d={class:"row q-col-gutter-md"},c={key:0,class:"col-12 col-sm-6 col-md-6 col-lg-4"},i={class:"col-12 col-sm-6 col-md-6 col-lg-4"},_={class:"no-margin text-h5"},m={class:"col-12 col-sm-6 col-md-6 col-lg-4"},r={class:"no-margin text-h5"},w={class:"col-12 col-sm-6 col-md-6 col-lg-4"},p={class:"col-12 col-sm-6 col-md-6 col-lg-4"},f={class:"col-12 col-sm-6 col-md-6 col-lg-4"},g={class:"no-margin text-h5"},W={class:"col-12 col-sm-6 col-md-6 col-lg-4"},k={key:0,class:"no-margin text-positive"},b={key:1,class:"no-margin"},v=(0,t._)("span",{class:"text-negative"}," Бот не подключен",-1),U=(0,t._)("br",null,null,-1),h=(0,t._)("br",null,null,-1),y=(0,t._)("span",{class:"text-bold"},[(0,t._)("a",{target:"_blank",href:"https://t.me/globalstroy_bot"},"@globalstroy_bot")],-1),z=(0,t._)("br",null,null,-1),j=(0,t._)("br",null,null,-1),q=(0,t._)("br",null,null,-1),D=(0,t._)("br",null,null,-1),Q=(0,t._)("br",null,null,-1),Z=(0,t._)("br",null,null,-1),C={__name:"Dashboard",setup(l){const a=[{id:1,name:"Низкий",color:"positive"},{id:2,name:"Средний",color:"warning"},{id:3,name:"Высокий",color:"negative"}],{user:e}=(0,n.t)(),C=(0,u.iH)([]),x=(0,u.iH)({}),H=(0,u.iH)(null);(0,t.wF)((async()=>{let l=new Date;H.value=l.toLocaleDateString().split(".").join("-"),await S(),await $()}));const S=async()=>{let l,a=H.value.split("-").reverse().join("-");l=await(0,s.api)(`/api/task/task?own=true&dead_line_date=${a}`),C.value=l.data.results},$=async()=>{const{data:l}=await(0,s.api)("/api/report/stats");x.value=l};return(l,n)=>{const s=(0,t.up)("q-card-section"),H=(0,t.up)("q-separator"),S=(0,t.up)("q-item-label"),$=(0,t.up)("q-badge"),I=(0,t.up)("q-item-section"),K=(0,t.up)("q-item"),L=(0,t.up)("q-list"),T=(0,t.up)("q-card"),Y=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(Y,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",d,[C.value.length>0?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Задач на сегодня "+(0,o.zw)(C.value.length),1)])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(C.value,(l=>((0,t.wg)(),(0,t.j4)(K,{key:l.id},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("№ "+(0,o.zw)(l.id),1)])),_:2},1024),(0,t.Wm)(S,{caption:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{color:a.find((a=>a.id===l.priority)).color},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.find((a=>a.id===l.priority)).name),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S,{overline:"",class:"ellipsis"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.task),1)])),_:2},1024),(0,t.Wm)(S,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)("до "+(0,o.zw)(l.dead_line_time),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(I,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{color:l.is_done?"positive":"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.is_done?"Выполнено":"Не выполнено"),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])):(0,t.kq)("",!0),(0,t._)("div",i,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Общее количество объектов ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("p",_,(0,o.zw)(x.value.objects_count),1)])),_:1})])),_:1})]),(0,t._)("div",m,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Количество клиентов ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("p",r,(0,o.zw)(x.value.all_clients_count),1)])),_:1})])),_:1})]),(0,t._)("div",w,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Процент выполнения работ ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L,{dense:"",separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(x.value.objects_procent_done,(a=>((0,t.wg)(),(0,t.j4)(K,{clickable:"",onClick:e=>l.$router.push(`/catalog/objects/${a.id}`),key:a.id},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.name),1)])),_:2},1024),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.procent_done),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})]),(0,t._)("div",p,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Сумма к оплате ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L,{dense:"",separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(x.value.objects_pay_ostatok,(a=>((0,t.wg)(),(0,t.j4)(K,{clickable:"",onClick:e=>l.$router.push(`/catalog/objects/${a.id}`),key:a.id},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.name),1)])),_:2},1024),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.pay_ostatok)+" руб",1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})]),(0,t._)("div",f,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Количество пользователей в системе ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("p",g,(0,o.zw)(x.value.all_users_count),1)])),_:1})])),_:1})]),(0,t._)("div",W,[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Статус подключения к TG боту ")])),_:1}),(0,t.Wm)(H),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,u.SU)(e).telega_id?((0,t.wg)(),(0,t.iD)("p",k," Бот подключен ")):((0,t.wg)(),(0,t.iD)("p",b,[v,U,h,(0,t.Uk)(" 1. Создайте диалог с "),y,z,j,(0,t.Uk)(" 3. В созданном диалоге нажмите Start"),q,D,(0,t.Uk)(" 4. Если вы все сделали правильно, бот сообщит об этом."),Q,Z]))])),_:1})])),_:1})])])])),_:1})}}};var x=e(9885),H=e(4458),S=e(3190),$=e(926),I=e(3246),K=e(490),L=e(6749),T=e(3115),Y=e(990),B=e(9984),F=e.n(B);const G=C,P=G;F()(C,"components",{QPage:x.Z,QCard:H.Z,QCardSection:S.Z,QSeparator:$.Z,QList:I.Z,QItem:K.Z,QItemSection:L.Z,QItemLabel:T.Z,QBadge:Y.Z})}}]);