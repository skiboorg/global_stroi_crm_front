"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[195],{8550:(e,a,l)=>{l.d(a,{Z:()=>i});var n=l(9835);const o={__name:"AddButton",props:["label","icon","loading","color"],setup(e){return(a,l)=>{const o=(0,n.up)("q-btn");return a.auth.user.role?.permission?.can_add?((0,n.wg)(),(0,n.j4)(o,{key:0,"no-caps":"",unelevated:"",loading:e.loading,color:e.color?e.color:"primary",label:e.label,icon:e.icon?e.icon:"add"},null,8,["loading","color","label","icon"])):(0,n.kq)("",!0)}}};var t=l(8879),r=l(9984),s=l.n(r);const c=o,i=c;s()(o,"components",{QBtn:t.Z})},1862:(e,a,l)=>{l.d(a,{Z:()=>i});var n=l(9835);const o={__name:"EditButton",props:["label","icon","color"],setup(e){return(a,l)=>{const o=(0,n.up)("q-btn");return a.auth.user.role?.permission?.can_edit?((0,n.wg)(),(0,n.j4)(o,{key:0,"no-caps":"",unelevated:"",color:e.color,label:e.label,icon:e.icon?e.icon:"edit"},null,8,["color","label","icon"])):(0,n.kq)("",!0)}}};var t=l(8879),r=l(9984),s=l.n(r);const c=o,i=c;s()(o,"components",{QBtn:t.Z})},4195:(e,a,l)=>{l.r(a),l.d(a,{default:()=>q});l(2879);var n=l(9835),o=l(6970),t=l(499),r=l(1569),s=l(8550),c=(l(1862),l(9876));const i={class:"flex items-center justify-between q-mb-md"},p={class:"no-margin text-h6 text-bold"},d={class:"text-grey-6"},u={class:"text-bold"},b={__name:"cards",setup(e){(0,c.E)();const a=[{name:"created_at",align:"left",label:"Дата создания",field:e=>new Date(e.created_at).toLocaleString(),sortable:!0},{name:"name",align:"left",label:"Объект",field:e=>e.object.name,sortable:!0},{name:"sender",align:"left",label:"Поставщик",field:e=>e.sender.name,sortable:!0},{name:"want_supply_date",align:"left",label:"Ожидаемая дата поставки",field:e=>new Date(e.want_supply_date).toLocaleDateString(),sortable:!0}],l={sortBy:"desc",descending:!1,page:1,rowsPerPage:25},b=(0,t.iH)([]);(0,n.wF)((async()=>{await g()}));const g=async()=>{const e=await(0,r.api)("/api/material_store/card");b.value=e.data};return(e,t)=>{const r=(0,n.up)("q-space"),c=(0,n.up)("q-th"),g=(0,n.up)("q-tr"),m=(0,n.up)("q-td"),w=(0,n.up)("q-table"),_=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(_,{padding:""},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n._)("p",p,[(0,n.Uk)("Учет передачи "),(0,n._)("span",d,(0,o.zw)(b.value.length),1)]),(0,n.Wm)(r),(0,n.Wm)(s.Z,{icon:"add",label:"Добавить карточку",onClick:t[0]||(t[0]=a=>e.$router.push("/store/cards/add"))})]),(0,n.Wm)(w,{flat:"",rows:b.value,columns:a,"row-key":"name","table-header-class":"table-header",pagination:l},{header:(0,n.w5)((e=>[(0,n.Wm)(g,{props:e,class:"bg-grey-2"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(a=>((0,n.wg)(),(0,n.j4)(c,{key:a.name,props:e},{default:(0,n.w5)((()=>[(0,n._)("span",u,(0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,n.w5)((a=>[(0,n.Wm)(g,{props:a},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.cols,(l=>((0,n.wg)(),(0,n.j4)(m,{key:l.name,onClick:l=>e.auth.user.role.permission.can_view?e.$router.push(`/store/card/${a.row.id}`):null,props:a},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,o.zw)(l.value),1)])),_:2},1032,["onClick","props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})}}};var g=l(9885),m=l(136),w=l(1746),_=l(1233),f=l(1682),h=l(7220),k=l(9984),y=l.n(k);const v=b,q=v;y()(b,"components",{QPage:g.Z,QSpace:m.Z,QTable:w.Z,QTr:_.Z,QTh:f.Z,QTd:h.Z})}}]);