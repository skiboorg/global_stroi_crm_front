"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[317],{8317:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var t=l(9835),u=l(6970),n=l(499),o=l(1957),i=l(8339),r=l(2591),m=l(6928);const d={key:1},c={preFetch({store:e,redirect:a}){const l=(0,m.t)(e);l.loggedIn||a({path:"/login"})}},w=Object.assign(c,{__name:"MainLayout",setup(e){const a=(0,n.iH)(!1),{user:l,logoutUser:c}=(0,m.t)(),w=(0,r.L)(),s=((0,i.yj)(),(0,n.iH)(""));return(e,i)=>{const r=(0,t.up)("q-btn"),m=(0,t.up)("q-toolbar-title"),p=(0,t.up)("q-item-section"),_=(0,t.up)("q-item"),g=(0,t.up)("q-separator"),f=(0,t.up)("q-list"),b=(0,t.up)("q-menu"),k=(0,t.up)("q-toolbar"),W=(0,t.up)("q-header"),v=(0,t.up)("q-item-label"),h=(0,t.up)("q-icon"),q=(0,t.up)("q-expansion-item"),Q=(0,t.up)("q-drawer"),Z=(0,t.up)("router-view"),y=(0,t.up)("q-page-container"),U=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(U,{view:"lHh Lpr lFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{elevated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:i[0]||(i[0]=e=>a.value=!a.value)}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(s.value),1)])),_:1}),(0,t.Wm)(r,{flat:"",label:(0,n.SU)(l).fio},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{fit:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{clickable:"",to:"/user/settings"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Настройки")])),_:1})])),_:1}),(0,t.Wm)(g),(0,t.Wm)(_,{clickable:"",onClick:(0,n.SU)(c)},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Выход")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,t.Wm)(Q,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=e=>a.value=e),"show-if-above":"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{separator:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{header:""},{default:(0,t.w5)((()=>[(0,t.Uk)(" ГЛОБАЛ СТРОЙ CRM ")])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,n.SU)(w).main_menu,((a,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[(0,t.Wm)(g),a.role_can_view.includes(e.auth.user.role?.id)&&a.menu_items.length>0?((0,t.wg)(),(0,t.j4)(q,{key:0,group:"mainmenu","header-class":"text-blue text-bold",icon:a.icon,label:a.name?a.name:a.page.name},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{separator:"",class:"bg-grey-2"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.menu_items,((a,l)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{key:l,clickable:!!a.page,to:a.page?a.page.url:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{name:a.icon},null,8,["name"])])),_:2},1024),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.name?a.name:a.page.name),1)])),_:2},1024)])),_:2},1032,["clickable","to"])),[[o.F8,a.role_can_view?.includes(e.auth.user.role?.id)]]))),128))])),_:2},1024)])),_:2},1032,["icon","label"])):((0,t.wg)(),(0,t.iD)("div",d,[a.role_can_view.includes(e.auth.user.role?.id)?((0,t.wg)(),(0,t.j4)(_,{key:0,clickable:!!a.page,to:a.page?a.page.url:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{name:a.icon},null,8,["name"])])),_:2},1024),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.name?a.name:a.page.name),1)])),_:2},1024)])),_:2},1032,["clickable","to"])):(0,t.kq)("",!0)]))])))),128))])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Z)])),_:1})])),_:1})}}});var s=l(7605),p=l(6602),_=l(1663),g=l(8879),f=l(1973),b=l(6362),k=l(3246),W=l(490),v=l(6749),h=l(926),q=l(6689),Q=l(3115),Z=l(651),y=l(2857),U=l(2133),C=l(9984),j=l.n(C);const H=w,I=H;j()(w,"components",{QLayout:s.Z,QHeader:p.Z,QToolbar:_.Z,QBtn:g.Z,QToolbarTitle:f.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:v.Z,QSeparator:h.Z,QDrawer:q.Z,QItemLabel:Q.Z,QExpansionItem:Z.Z,QIcon:y.Z,QPageContainer:U.Z})}}]);