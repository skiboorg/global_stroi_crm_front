"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[661],{8203:(a,e,l)=>{l.d(e,{Z:()=>c});var t=l(9835);function n(a,e){const l=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(l,{"no-caps":"",outline:"",color:"primary",label:"Назад",icon:"arrow_back",class:"q-mr-md",onClick:e[0]||(e[0]=e=>a.$router.back())})}var u=l(1639),i=l(8879),o=l(9984),d=l.n(o);const r={},s=(0,u.Z)(r,[["render",n]]),c=s;d()(r,"components",{QBtn:i.Z})},6661:(a,e,l)=>{l.r(e),l.d(e,{default:()=>V});var t=l(9835),n=l(6970),u=l(499),i=l(1569),o=l(8339),d=l(8203);const r={class:"flex items-center q-mb-md"},s={key:0},c={class:"text-h6"},m=(0,t._)("br",null,null,-1),p=(0,t._)("br",null,null,-1),_=(0,t._)("br",null,null,-1),w=(0,t._)("br",null,null,-1),b={class:"full-width"},v=(0,t._)("tr",{class:"text-bold table-header text-center"},[(0,t._)("td",null,"№"),(0,t._)("td",null,"Название"),(0,t._)("td",null,"Количество"),(0,t._)("td",null,"Ед. измерения"),(0,t._)("td",null,"Получено")],-1),k={key:0},g={key:1},y={key:2},h={key:3},z={__name:"card",setup(a){const e=(0,u.iH)(null),l=(0,u.iH)(!1),z=(0,o.yj)();(0,t.wF)((async()=>{await D()}));const D=async()=>{const a=await(0,i.api)(`/api/material_store/card/${z.params.id}`);e.value=a.data},U=async a=>{console.log(a),l.value=!l.value,await i.api.patch(`/api/material_store/card_item/${a}`,{is_supply:!0}),await D(),l.value=!l.value},x=async(a,e)=>{l.value=!l.value,await i.api.patch(`/api/material_store/card_item/${e}`,{amount:a}),await D(),l.value=!l.value};return(a,u)=>{const i=(0,t.up)("q-input"),o=(0,t.up)("q-checkbox"),z=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(z,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(d.Z)]),e.value?((0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("p",c,[(0,t.Uk)(" Карточка передачи оборудования № "+(0,n.zw)(e.value.id),1),m,(0,t.Uk)(" Создана: "+(0,n.zw)(new Date(e.value.created_at).toLocaleString()),1),p,(0,t.Uk)(" Объект: "+(0,n.zw)(e.value.object.name),1),_,(0,t.Uk)(" Получатель: "+(0,n.zw)(e.value.receiver.name),1),w,(0,t.Uk)(" Отправитель: "+(0,n.zw)(e.value.sender.name),1)])])):(0,t.kq)("",!0),(0,t._)("table",b,[v,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.value?.items,((a,e)=>((0,t.wg)(),(0,t.iD)("tr",{key:a.id},[(0,t._)("td",null,(0,n.zw)(e+1),1),(0,t._)("td",null,(0,n.zw)(a.item.name),1),a.is_supply?((0,t.wg)(),(0,t.iD)("td",g,[(0,t.Wm)(i,{outlined:"",disable:l.value,type:"number",modelValue:a.amount,"onUpdate:modelValue":[e=>a.amount=e,e=>x(a.amount,a.id)],min:"0",max:a.init_amount},null,8,["disable","modelValue","onUpdate:modelValue","max"])])):((0,t.wg)(),(0,t.iD)("td",k,(0,n.zw)(a.amount),1)),(0,t._)("td",null,(0,n.zw)(a.unit.name),1),a.is_supply?((0,t.wg)(),(0,t.iD)("td",y,(0,n.zw)(new Date(a.supply_date).toLocaleString()),1)):((0,t.wg)(),(0,t.iD)("td",h,[(0,t.Wm)(o,{disable:l.value,"model-value":!1,"onUpdate:modelValue":e=>U(a.id)},null,8,["disable","onUpdate:modelValue"])]))])))),128))])])),_:1})}}};var D=l(9885),U=l(3119),x=l(1006),f=l(9984),q=l.n(f);const Z=z,V=Z;q()(z,"components",{QPage:D.Z,QInput:U.Z,QCheckbox:x.Z})}}]);