"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[237],{2637:(t,a,e)=>{e.d(a,{d:()=>n});var l=e(6827),o=e(8346);function n(t,a){l.Z.create({message:a,html:!0,color:t,position:o.Z.lt.sm?"bottom":"bottom-right"})}},8203:(t,a,e)=>{e.d(a,{Z:()=>c});var l=e(9835);function o(t,a){const e=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(e,{"no-caps":"",outline:"",color:"primary",label:"Назад",icon:"arrow_back",class:"q-mr-md",onClick:a[0]||(a[0]=a=>t.$router.back())})}var n=e(1639),s=e(8879),u=e(9984),r=e.n(u);const d={},m=(0,n.Z)(d,[["render",o]]),c=m;r()(d,"components",{QBtn:s.Z})},2237:(t,a,e)=>{e.r(a),e.d(a,{default:()=>Q});var l=e(9835),o=e(6970),n=e(1957),s=e(8339),u=e(1569),r=e(499),d=e(2637),m=e(8203);const c={class:"flex items-center justify-between q-mb-md"},i={class:"no-margin text-h6 text-bold"},p={class:"text-h6 text-bold"},_={class:"info-table q-mb-lg full-width"},b=(0,l._)("tr",null,[(0,l._)("td",{class:"text-bold"},"№"),(0,l._)("td",{class:"text-bold"},"Вопрос"),(0,l._)("td",{class:"text-bold"},"План"),(0,l._)("td",{class:"text-bold"},"Факт")],-1),v={key:0,class:"q-mb-lg"},w=(0,l._)("p",{class:"text-h6 text-bold"},"Комментарий, почему такая оценка",-1),f={key:1,class:"q-mb-lg"},g={class:"text-h6 text-bold"},y={__name:"stress_form_for_user",setup(t){const a=(0,s.yj)(),e=(0,r.iH)({}),y=(0,r.iH)({}),h=(0,r.iH)("Согласен"),q=["Согласен","Не согласен","Нужно обсудить"];console.log(a.params.uuid),(0,l.wF)((async()=>{await x()}));const x=async()=>{const t=await(0,u.api)(`/api/form/stress_form_data/${a.params.uuid}`);console.log(t.data),e.value=t.data,e.value.data?y.value=e.value.data:y.value=e.value.form?.default_data},k=async()=>{await u.api.patch(`/api/form/stress_form_data/${a.params.uuid}`,{data:y.value,is_done:!0,comment:h.value});(0,d.d)("positive","Данные обновлены")};return(t,a)=>{const s=(0,l.up)("q-input"),u=(0,l.up)("q-select"),r=(0,l.up)("q-btn"),d=(0,l.up)("q-form"),x=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(x,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(m.Z),(0,l._)("p",i,"Форма ID "+(0,o.zw)(e.value.id)+" от "+(0,o.zw)(new Date(e.value.created_at).toLocaleString()),1)]),(0,l._)("p",p,(0,o.zw)(e.value.form?.name),1),(0,l.Wm)(d,{onSubmit:(0,n.iM)(k,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("table",_,[b,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",null,(0,o.zw)(a+1),1),(0,l._)("td",null,(0,o.zw)(t.label),1),(0,l._)("td",null,(0,o.zw)(t.plan_amount),1),(0,l._)("td",null,[(0,l.Wm)(s,{style:{width:"50%"},modelValue:t.fact_amount,"onUpdate:modelValue":a=>t.fact_amount=a,outlined:"","lazy-rules":"",dense:"",type:"number",readonly:!!e.value.rate,rules:[t=>null!==t&&""!==t||"Это обязательное поле"]},null,8,["modelValue","onUpdate:modelValue","readonly","rules"])])])))),128))]),e.value.comment?((0,l.wg)(),(0,l.iD)("div",v,[w,(0,l._)("p",null,(0,o.zw)(e.value.comment),1)])):(0,l.kq)("",!0),e.value.rate?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("p",g,"Оценка выполнения: "+(0,o.zw)(e.value.rate),1),(0,l.Wm)(u,{outlined:"",modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),options:q,label:"Комментарий к оценке"},null,8,["modelValue"])])):(0,l.kq)("",!0),(0,l.Wm)(r,{type:"submit","no-caps":"",color:"positive",label:"Сохранить"})])),_:1},8,["onSubmit"])])),_:1})}}};var h=e(9885),q=e(8326),x=e(3119),k=e(6384),Z=e(8879),z=e(9984),V=e.n(z);const D=y,Q=D;V()(y,"components",{QPage:h.Z,QForm:q.Z,QInput:x.Z,QSelect:k.Z,QBtn:Z.Z})}}]);