"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[986],{6986:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});l(2879);var s=l(9835),t=l(6970),n=l(499),i=(l(1569),l(8550)),o=l(1862),r=l(9876);const p={class:"flex items-center justify-between q-mb-md"},u={class:"no-margin text-h6 text-bold"},d={class:"text-grey-6"},c={class:"text-bold"},m=["innerHTML"],g={__name:"index",setup(e){const a=(0,r.E)(),l=[{name:"username",align:"left",label:"Логин",field:e=>e.username,sortable:!0},{name:"role",align:"left",label:"Роль",field:e=>e.role?.name,sortable:!0},{name:"firstname",align:"left",label:"ФИО",field:e=>e.fio,sortable:!0},{name:"position",align:"left",label:"Телефон",field:e=>e.phone,sortable:!0},{name:"email",align:"left",label:"E-mail",field:e=>e.email,sortable:!0},{name:"telega_id",align:"left",label:"TG бот",field:e=>e.telega_id?'<span class="text-positive">Подключен</span>':'<span class="text-negative">Не подключен</span>',sortable:!0},{name:"active",align:"left",label:"Активный",field:e=>e.is_active?'<span class="text-positive">Да</span>':'<span class="text-negative">Нет</span>',sortable:!0}],g={sortBy:"desc",descending:!1,page:1,rowsPerPage:100},b=(0,n.iH)([]),w=(0,n.iH)({q:"",role__id:""});(0,s.wF)((async()=>{await _()}));const _=async()=>{b.value=await a.getUsers(`q=${w.value.q}&role__id=${w.value.role__id}`)};return(e,a)=>{const n=(0,s.up)("q-space"),r=(0,s.up)("q-th"),w=(0,s.up)("q-tr"),_=(0,s.up)("q-td"),f=(0,s.up)("q-table"),h=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(h,{padding:""},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("p",u,[(0,s.Uk)("Пользователи "),(0,s._)("span",d,(0,t.zw)(b.value.length),1)]),(0,s.Wm)(n),(0,s.Wm)(i.Z,{icon:"add",label:"Добавить",onClick:a[0]||(a[0]=a=>e.$router.push("/user/add"))})]),(0,s.Wm)(f,{flat:"",rows:b.value,columns:l,"row-key":"name","hide-pagination":"","table-header-class":"table-header",pagination:g},{header:(0,s.w5)((e=>[(0,s.Wm)(w,{props:e,class:"bg-grey-2"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cols,(a=>((0,s.wg)(),(0,s.j4)(r,{key:a.name,props:e},{default:(0,s.w5)((()=>[(0,s._)("span",c,(0,t.zw)(a.label),1)])),_:2},1032,["props"])))),128)),(0,s.Wm)(r,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,s.w5)((a=>[(0,s.Wm)(w,{props:a},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.cols,(l=>((0,s.wg)(),(0,s.j4)(_,{key:l.name,onClick:l=>e.auth.user.role.permission.can_view?e.$router.push(`/user/${a.row.id}`):null,props:a},{default:(0,s.w5)((()=>[(0,s._)("p",{class:"no-margin",innerHTML:l.value},null,8,m)])),_:2},1032,["onClick","props"])))),128)),(0,s.Wm)(_,{"auto-width":""},{default:(0,s.w5)((()=>[(0,s.Wm)(o.Z,{onClick:l=>e.$router.push(`/user/edit/${a.row.id}`)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})}}};var b=l(9885),w=l(136),_=l(1746),f=l(1233),h=l(1682),v=l(7220),k=l(9984),q=l.n(k);const x=g,y=x;q()(g,"components",{QPage:b.Z,QSpace:w.Z,QTable:_.Z,QTr:f.Z,QTh:h.Z,QTd:v.Z})}}]);