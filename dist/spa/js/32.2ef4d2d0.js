"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[32],{8550:(l,e,a)=>{a.d(e,{Z:()=>r});var o=a(9835);const n={__name:"AddButton",props:["label","icon","loading","color"],setup(l){return(e,a)=>{const n=(0,o.up)("q-btn");return e.auth.user.role?.permission?.can_add?((0,o.wg)(),(0,o.j4)(n,{key:0,"no-caps":"",unelevated:"",loading:l.loading,color:l.color?l.color:"primary",label:l.label,icon:l.icon?l.icon:"add"},null,8,["loading","color","label","icon"])):(0,o.kq)("",!0)}}};var t=a(8879),s=a(9984),u=a.n(s);const i=n,r=i;u()(n,"components",{QBtn:t.Z})},1862:(l,e,a)=>{a.d(e,{Z:()=>r});var o=a(9835);const n={__name:"EditButton",props:["label","icon","color"],setup(l){return(e,a)=>{const n=(0,o.up)("q-btn");return e.auth.user.role?.permission?.can_edit?((0,o.wg)(),(0,o.j4)(n,{key:0,"no-caps":"",unelevated:"",color:l.color,label:l.label,icon:l.icon?l.icon:"edit"},null,8,["color","label","icon"])):(0,o.kq)("",!0)}}};var t=a(8879),s=a(9984),u=a.n(s);const i=n,r=i;u()(n,"components",{QBtn:t.Z})},9032:(l,e,a)=>{a.r(e),a.d(e,{default:()=>j});a(2879);var o=a(9835),n=a(6970),t=a(499),s=a(1569),u=a(8550),i=a(1862),r=a(9876);const d={class:"flex items-center justify-between q-mb-md"},c=(0,o._)("p",{class:"no-margin text-h6 text-bold"},"Склады ",-1),p={class:"text-bold"},m={class:"q-gutter-md"},b={__name:"all",setup(l){(0,r.E)();const e=[{name:"address",align:"left",label:"Адрес склада",field:l=>l.address,sortable:!0}],a=(0,t.iH)(!1),b=((0,t.iH)(null),(0,t.iH)({id:null,address:null,comment:null})),w=(0,t.iH)([]);(0,o.wF)((async()=>{await _()}));const _=async()=>{const l=await(0,s.api)("/api/material_store/store");w.value=l.data},v=async l=>{await s.api.delete(`/api/material_store/store/${l}`),await _()},g=l=>{console.log(l),b.value=l||{address:null},a.value=!0},q=async()=>{b.value.id?await s.api.put(`/api/material_store/store/${b.value.id}`,b.value):await s.api.post("/api/material_store/store",b.value),a.value=!1,await _()};return(l,t)=>{const s=(0,o.up)("q-space"),r=(0,o.up)("q-th"),_=(0,o.up)("q-tr"),Z=(0,o.up)("q-td"),f=(0,o.up)("q-btn"),k=(0,o.up)("q-table"),W=(0,o.up)("q-page"),h=(0,o.up)("q-input"),y=(0,o.up)("q-card-section"),Q=(0,o.up)("q-card-actions"),C=(0,o.up)("q-card"),V=(0,o.up)("q-dialog"),H=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(W,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",d,[c,(0,o.Wm)(s),(0,o.Wm)(u.Z,{icon:"add",label:"Добавить",onClick:t[0]||(t[0]=l=>g(null))})]),(0,o.Wm)(k,{flat:"",rows:w.value,columns:e,"hide-pagination":"","table-header-class":"table-header"},{header:(0,o.w5)((l=>[(0,o.Wm)(_,{props:l,class:"bg-grey-2"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.cols,(e=>((0,o.wg)(),(0,o.j4)(r,{key:e.name,props:l},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,n.zw)(e.label),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(r,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(_,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(l=>((0,o.wg)(),(0,o.j4)(Z,{key:l.name,props:e},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,n.zw)(l.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(Z,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(f,{icon:"visibility",flat:"",dense:"",onClick:a=>l.$router.push(`/store/detail/${e.row.id}`)},null,8,["onClick"]),(0,o.Wm)(i.Z,{dense:"",onClick:l=>g(e.row)},null,8,["onClick"]),(0,o.Wm)(u.Z,{dense:"",color:"negative",icon:"delete",onClick:l=>v(e.row.id)},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1}),(0,o.Wm)(V,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{outlined:"",label:"Адрес",class:"q-mb-md",modelValue:b.value.address,"onUpdate:modelValue":t[1]||(t[1]=l=>b.value.address=l)},null,8,["modelValue"]),(0,o.Wm)(h,{outlined:"",label:"Коментарий",type:"textarea",modelValue:b.value.comment,"onUpdate:modelValue":t[2]||(t[2]=l=>b.value.comment=l)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(Q,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Сохранить",disable:!b.value.address,"no-caps":"",color:"positive",onClick:q},null,8,["disable"]),(0,o.wy)((0,o.Wm)(f,{label:"Отмена","no-caps":"",color:"dark"},null,512),[[H]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var w=a(9885),_=a(136),v=a(1746),g=a(1233),q=a(1682),Z=a(7220),f=a(8879),k=a(2074),W=a(4458),h=a(3190),y=a(3119),Q=a(1821),C=a(2146),V=a(9984),H=a.n(V);const T=b,j=T;H()(b,"components",{QPage:w.Z,QSpace:_.Z,QTable:v.Z,QTr:g.Z,QTh:q.Z,QTd:Z.Z,QBtn:f.Z,QDialog:k.Z,QCard:W.Z,QCardSection:h.Z,QInput:y.Z,QCardActions:Q.Z}),H()(b,"directives",{ClosePopup:C.Z})}}]);