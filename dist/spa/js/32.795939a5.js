"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[32],{9032:(l,e,a)=>{a.r(e),a.d(e,{default:()=>T});a(2879);var o=a(9835),t=a(6970),u=a(499),n=a(1569),d=a(8550),s=a(1862),i=a(9876);const r={class:"flex items-center justify-between q-mb-md"},m=(0,o._)("p",{class:"no-margin text-h6 text-bold"},"Склады ",-1),p={class:"text-bold"},c={class:"q-gutter-md"},w={__name:"all",setup(l){(0,i.E)();const e=[{name:"address",align:"left",label:"Адрес склада",field:l=>l.address,sortable:!0}],a=(0,u.iH)(!1),w=((0,u.iH)(null),(0,u.iH)({id:null,address:null,comment:null,organization:null,dolgnost:null,fio:null})),b=(0,u.iH)([]);(0,o.wF)((async()=>{await v()}));const v=async()=>{const l=await(0,n.api)("/api/material_store/store");b.value=l.data},g=async l=>{await n.api.delete(`/api/material_store/store/${l}`),await v()},_=l=>{console.log(l),w.value=l||{address:null},a.value=!0},f=async()=>{w.value.id?await n.api.put(`/api/material_store/store/${w.value.id}`,w.value):await n.api.post("/api/material_store/store",w.value),a.value=!1,await v()};return(l,u)=>{const n=(0,o.up)("q-space"),i=(0,o.up)("q-th"),v=(0,o.up)("q-tr"),W=(0,o.up)("q-td"),q=(0,o.up)("q-btn"),V=(0,o.up)("q-table"),h=(0,o.up)("q-page"),Z=(0,o.up)("q-input"),k=(0,o.up)("q-card-section"),C=(0,o.up)("q-card-actions"),y=(0,o.up)("q-card"),Q=(0,o.up)("q-dialog"),x=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",r,[m,(0,o.Wm)(n),(0,o.Wm)(d.Z,{icon:"add",label:"Добавить",onClick:u[0]||(u[0]=l=>_(null))})]),(0,o.Wm)(V,{flat:"",rows:b.value,columns:e,"hide-pagination":"","table-header-class":"table-header"},{header:(0,o.w5)((l=>[(0,o.Wm)(v,{props:l,class:"bg-grey-2"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.cols,(e=>((0,o.wg)(),(0,o.j4)(i,{key:e.name,props:l},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,t.zw)(e.label),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(i,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(l=>((0,o.wg)(),(0,o.j4)(W,{key:l.name,props:e},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,t.zw)(l.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(W,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Wm)(q,{icon:"visibility",flat:"",dense:"",onClick:a=>l.$router.push(`/store/detail/${e.row.id}`)},null,8,["onClick"]),(0,o.Wm)(s.Z,{dense:"",onClick:l=>_(e.row)},null,8,["onClick"]),(0,o.Wm)(d.Z,{dense:"",color:"negative",icon:"delete",onClick:l=>g(e.row.id)},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1}),(0,o.Wm)(Q,{modelValue:a.value,"onUpdate:modelValue":u[6]||(u[6]=l=>a.value=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{style:{width:"700px","max-width":"100vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{outlined:"",label:"Адрес",class:"q-mb-md",modelValue:w.value.address,"onUpdate:modelValue":u[1]||(u[1]=l=>w.value.address=l)},null,8,["modelValue"]),(0,o.Wm)(Z,{outlined:"",label:"Организация",class:"q-mb-md",modelValue:w.value.organization,"onUpdate:modelValue":u[2]||(u[2]=l=>w.value.organization=l)},null,8,["modelValue"]),(0,o.Wm)(Z,{outlined:"",label:"ФИО",class:"q-mb-md",modelValue:w.value.fio,"onUpdate:modelValue":u[3]||(u[3]=l=>w.value.fio=l)},null,8,["modelValue"]),(0,o.Wm)(Z,{outlined:"",label:"Должность",class:"q-mb-md",modelValue:w.value.dolgnost,"onUpdate:modelValue":u[4]||(u[4]=l=>w.value.dolgnost=l)},null,8,["modelValue"]),(0,o.Wm)(Z,{outlined:"",label:"Коментарий",type:"textarea",modelValue:w.value.comment,"onUpdate:modelValue":u[5]||(u[5]=l=>w.value.comment=l)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(C,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{label:"Сохранить",disable:!w.value.address,"no-caps":"",color:"positive",onClick:f},null,8,["disable"]),(0,o.wy)((0,o.Wm)(q,{label:"Отмена","no-caps":"",color:"dark"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var b=a(9885),v=a(136),g=a(1746),_=a(1233),f=a(1682),W=a(7220),q=a(8879),V=a(2074),h=a(4458),Z=a(3190),k=a(3119),C=a(1821),y=a(2146),Q=a(9984),x=a.n(Q);const H=w,T=H;x()(w,"components",{QPage:b.Z,QSpace:v.Z,QTable:g.Z,QTr:_.Z,QTh:f.Z,QTd:W.Z,QBtn:q.Z,QDialog:V.Z,QCard:h.Z,QCardSection:Z.Z,QInput:k.Z,QCardActions:C.Z}),x()(w,"directives",{ClosePopup:y.Z})}}]);