"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[986],{8550:(e,l,o)=>{o.d(l,{Z:()=>u});var a=o(9835);const n={__name:"AddButton",props:["label","icon","loading","color"],setup(e){return(l,o)=>{const n=(0,a.up)("q-btn");return l.auth.user.role?.permission?.can_add?((0,a.wg)(),(0,a.j4)(n,{key:0,"no-caps":"",unelevated:"",loading:e.loading,color:e.color?e.color:"primary",label:e.label,icon:e.icon?e.icon:"add"},null,8,["loading","color","label","icon"])):(0,a.kq)("",!0)}}};var r=o(8879),t=o(9984),s=o.n(t);const i=n,u=i;s()(n,"components",{QBtn:r.Z})},1862:(e,l,o)=>{o.d(l,{Z:()=>u});var a=o(9835);const n={__name:"EditButton",props:["label","icon","color"],setup(e){return(l,o)=>{const n=(0,a.up)("q-btn");return l.auth.user.role?.permission?.can_edit?((0,a.wg)(),(0,a.j4)(n,{key:0,"no-caps":"",unelevated:"",color:e.color,label:e.label,icon:e.icon?e.icon:"edit"},null,8,["color","label","icon"])):(0,a.kq)("",!0)}}};var r=o(8879),t=o(9984),s=o.n(t);const i=n,u=i;s()(n,"components",{QBtn:r.Z})},6986:(e,l,o)=>{o.r(l),o.d(l,{default:()=>y});o(2879);var a=o(9835),n=o(6970),r=o(499),t=(o(1569),o(8550)),s=o(1862),i=o(9876);const u={class:"flex items-center justify-between q-mb-md"},c={class:"no-margin text-h6 text-bold"},p={class:"text-grey-6"},d={class:"text-bold"},b={__name:"index",setup(e){const l=(0,i.E)(),o=[{name:"username",align:"left",label:"Логин",field:e=>e.username,sortable:!0},{name:"role",align:"left",label:"Роль",field:e=>e.role?.name,sortable:!0},{name:"firstname",align:"left",label:"ФИО",field:e=>e.fio,sortable:!0},{name:"position",align:"left",label:"Телефон",field:e=>e.phone,sortable:!0}],b={sortBy:"desc",descending:!1,page:1,rowsPerPage:100},m=(0,r.iH)([]),w=(0,r.iH)({q:"",role__id:""});(0,a.wF)((async()=>{await _()}));const _=async()=>{m.value=await l.getUsers(`q=${w.value.q}&role__id=${w.value.role__id}`)};return(e,l)=>{const r=(0,a.up)("q-space"),i=(0,a.up)("q-th"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-td"),g=(0,a.up)("q-table"),f=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(f,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("p",c,[(0,a.Uk)("Пользователи "),(0,a._)("span",p,(0,n.zw)(m.value.length),1)]),(0,a.Wm)(r),(0,a.Wm)(t.Z,{icon:"add",label:"Добавить пользователя",onClick:l[0]||(l[0]=l=>e.$router.push("/user/add"))})]),(0,a.Wm)(g,{flat:"",rows:m.value,columns:o,"row-key":"name","table-header-class":"table-header",pagination:b},{header:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e,class:"bg-grey-2"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(l=>((0,a.wg)(),(0,a.j4)(i,{key:l.name,props:e},{default:(0,a.w5)((()=>[(0,a._)("span",d,(0,n.zw)(l.label),1)])),_:2},1032,["props"])))),128)),(0,a.Wm)(i,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,a.w5)((l=>[(0,a.Wm)(w,{props:l},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.cols,(o=>((0,a.wg)(),(0,a.j4)(_,{key:o.name,onClick:o=>e.auth.user.role.permission.can_view?e.$router.push(`/user/${l.row.id}`):null,props:l},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,n.zw)(o.value),1)])),_:2},1032,["onClick","props"])))),128)),(0,a.Wm)(_,{"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(s.Z,{onClick:o=>e.$router.push(`/user/edit/${l.row.id}`)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})}}};var m=o(9885),w=o(136),_=o(1746),g=o(1233),f=o(1682),h=o(7220),k=o(9984),v=o.n(k);const q=b,y=q;v()(b,"components",{QPage:m.Z,QSpace:w.Z,QTable:_.Z,QTr:g.Z,QTh:f.Z,QTd:h.Z})}}]);