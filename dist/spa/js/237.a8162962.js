"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[237],{2637:(e,a,l)=>{l.d(a,{d:()=>o});var t=l(6827),u=l(8346);function o(e,a){t.Z.create({message:a,html:!0,color:e,position:u.Z.lt.sm?"bottom":"bottom-right"})}},2237:(e,a,l)=>{l.r(a),l.d(a,{default:()=>h});var t=l(9835),u=l(6970),o=l(1957),s=l(8339),n=l(1569),r=l(499),i=l(2637);const d={class:"flex items-center justify-between q-mb-md"},m={class:"no-margin text-h6 text-bold"},p={__name:"stress_form_for_user",setup(e){const a=(0,s.yj)(),l=(0,r.iH)({}),p=(0,r.iH)({}),c=(0,r.iH)(null);console.log(a.params.uuid),(0,t.wF)((async()=>{await _()}));const _=async()=>{const e=await(0,n.api)(`/api/form/stress_form_data/${a.params.uuid}`);console.log(e.data),l.value=e.data,c.value=l.value.user_feedback,l.value.data?p.value=l.value.data:p.value=l.value.form?.default_data},v=async()=>{await n.api.patch(`/api/form/stress_form_data/${a.params.uuid}`,{data:p.value,user_feedback:c.value,is_done:!0});(0,i.d)("positive","Данные обновлены")};return(e,a)=>{const s=(0,t.up)("q-item-section"),n=(0,t.up)("q-input"),r=(0,t.up)("q-item"),i=(0,t.up)("q-list"),_=(0,t.up)("q-btn"),f=(0,t.up)("q-form"),b=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(b,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t._)("p",m,"Форма ID "+(0,u.zw)(l.value.id)+" от "+(0,u.zw)(new Date(l.value.created_at).toLocaleString()),1)]),(0,t.Wm)(f,{onSubmit:(0,o.iM)(v,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.value,((e,a)=>((0,t.wg)(),(0,t.j4)(r,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{side:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a+1),1)])),_:2},1024),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.label),1)])),_:2},1024),(0,t.Wm)(s,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,outlined:"","lazy-rules":"",readonly:!!l.value.mark,rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},null,8,["modelValue","onUpdate:modelValue","readonly","rules"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),l.value.mark?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(_,{key:0,type:"submit","no-caps":"",color:"positive",label:"Сохранить"}))])),_:1},8,["onSubmit"]),l.value.mark?((0,t.wg)(),(0,t.j4)(f,{key:0,onSubmit:(0,o.iM)(v,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{readonly:!!l.value.user_feedback,modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),label:"Комментарий",outlined:"",type:"textarea"},null,8,["readonly","modelValue"]),l.value.user_feedback?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(_,{key:0,type:"submit","no-caps":"",color:"positive",label:"Сохранить"}))])),_:1},8,["onSubmit"])):(0,t.kq)("",!0)])),_:1})}}};var c=l(9885),_=l(8326),v=l(3246),f=l(490),b=l(6749),w=l(3119),k=l(8879),g=l(9984),y=l.n(g);const q=p,h=q;y()(p,"components",{QPage:c.Z,QForm:_.Z,QList:v.Z,QItem:f.Z,QItemSection:b.Z,QInput:w.Z,QBtn:k.Z})}}]);