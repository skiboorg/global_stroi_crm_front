"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[646],{2637:(e,l,a)=>{a.d(l,{d:()=>n});var o=a(6827),t=a(8346);function n(e,l){o.Z.create({message:l,html:!0,color:e,position:t.Z.lt.sm?"bottom":"bottom-right"})}},8550:(e,l,a)=>{a.d(l,{Z:()=>r});var o=a(9835);const t={__name:"AddButton",props:["label","icon","loading","color"],setup(e){return(l,a)=>{const t=(0,o.up)("q-btn");return l.auth.user.role?.permission?.can_add?((0,o.wg)(),(0,o.j4)(t,{key:0,"no-caps":"",unelevated:"",loading:e.loading,color:e.color?e.color:"primary",label:e.label,icon:e.icon?e.icon:"add"},null,8,["loading","color","label","icon"])):(0,o.kq)("",!0)}}};var n=a(8879),u=a(9984),s=a.n(u);const i=t,r=i;s()(t,"components",{QBtn:n.Z})},646:(e,l,a)=>{a.r(l),a.d(l,{default:()=>h});a(2879);var o=a(9835),t=a(6970),n=a(499),u=a(1569),s=a(8550),i=a(2637);const r=(0,o._)("div",{class:"flex items-center justify-between q-mb-md"},[(0,o._)("p",{class:"no-margin text-h6 text-bold"},"Структура формы усилий")],-1),c={class:""},d={__name:"stress_form_structure",setup(e){const l=(0,n.iH)([]),a=(0,n.iH)(!1);(0,o.wF)((async()=>{await d()}));const d=async()=>{const e=await(0,u.api)("/api/form/stress_form/1");l.value=e.data.default_data},m=()=>{l.value.push({label:null,use_in_report:!1,value:null})},p=e=>{l.value.splice(e,1)},_=async()=>{a.value=!a.value;const e=await u.api.patch("/api/form/stress_form/1",{default_data:l.value});(0,i.d)("positive","Форма сохранена"),console.log(e.data),a.value=!a.value},b=(0,o.Fl)((()=>{let e=!1;return l.value.forEach((l=>{!l.label&&(e=!0)})),e}));return(e,n)=>{const u=(0,o.up)("q-item-section"),i=(0,o.up)("q-input"),d=(0,o.up)("q-checkbox"),v=(0,o.up)("q-item"),g=(0,o.up)("q-list"),f=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(f,{padding:""},{default:(0,o.w5)((()=>[r,(0,o._)("div",c,[(0,o.Wm)(s.Z,{label:"Добавить ряд",onClick:m}),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.value,((e,l)=>((0,o.wg)(),(0,o.j4)(v,{key:l},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{side:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l+1),1)])),_:2},1024),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(u,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:e.use_in_report,"onUpdate:modelValue":l=>e.use_in_report=l,label:"Использовать в отчетах"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(u,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s.Z,{icon:"delete",color:"negative",onClick:e=>p(l)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),l.value.length>0?((0,o.wg)(),(0,o.j4)(s.Z,{key:0,loading:a.value,label:"Сохранить форму",icon:"save",disable:b.value,onClick:_,color:"positive"},null,8,["loading","disable"])):(0,o.kq)("",!0)])])),_:1})}}};var m=a(9885),p=a(3246),_=a(490),b=a(6749),v=a(3119),g=a(1006),f=a(9984),w=a.n(f);const k=d,h=k;w()(d,"components",{QPage:m.Z,QList:p.Z,QItem:_.Z,QItemSection:b.Z,QInput:v.Z,QCheckbox:g.Z})}}]);