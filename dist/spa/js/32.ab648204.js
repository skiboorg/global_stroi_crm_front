"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[32],{9032:(l,e,a)=>{a.r(e),a.d(e,{default:()=>U});a(2879);var o=a(9835),t=a(6970),u=a(499),n=a(1569),d=a(8550),s=a(1862),i=a(9876),r=a(1375);const m={class:"flex items-center justify-between q-mb-md"},p=(0,o._)("p",{class:"no-margin text-h6 text-bold"},"Склады ",-1),c={class:"text-bold"},w={class:"q-gutter-md"},b={__name:"all",setup(l){(0,i.E)();const e=[{name:"address",align:"left",label:"Адрес склада",field:l=>l.address,sortable:!0}],a=(0,u.iH)(!1),b=((0,u.iH)(null),(0,u.iH)({id:null,address:null,comment:null,organization:null,dolgnost:null,fio:null})),v=(0,u.iH)([]);(0,o.wF)((async()=>{await g()}));const g=async()=>{const l=await(0,n.api)("/api/material_store/store");v.value=l.data},_=async l=>{await n.api.delete(`/api/material_store/store/${l}`),await g()},W=l=>{console.log(l),b.value=l||{address:null},a.value=!0},f=async()=>{b.value.id?await n.api.put(`/api/material_store/store/${b.value.id}`,b.value):await n.api.post("/api/material_store/store",b.value),a.value=!1,await g()};return(l,u)=>{const n=(0,o.up)("q-space"),i=(0,o.up)("q-th"),g=(0,o.up)("q-tr"),q=(0,o.up)("q-td"),V=(0,o.up)("q-btn"),h=(0,o.up)("q-table"),Z=(0,o.up)("q-page"),k=(0,o.up)("q-input"),C=(0,o.up)("q-card-section"),y=(0,o.up)("q-card-actions"),Q=(0,o.up)("q-card"),x=(0,o.up)("q-dialog"),H=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Z,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r.Z),(0,o._)("div",m,[p,(0,o.Wm)(n),(0,o.Wm)(d.Z,{icon:"add",label:"Добавить",onClick:u[0]||(u[0]=l=>W(null))})]),(0,o.Wm)(h,{flat:"",rows:v.value,columns:e,"hide-pagination":"","table-header-class":"table-header"},{header:(0,o.w5)((l=>[(0,o.Wm)(g,{props:l,class:"bg-grey-2"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.cols,(e=>((0,o.wg)(),(0,o.j4)(i,{key:e.name,props:l},{default:(0,o.w5)((()=>[(0,o._)("span",c,(0,t.zw)(e.label),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(i,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(g,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(l=>((0,o.wg)(),(0,o.j4)(q,{key:l.name,props:e},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,t.zw)(l.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(q,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.Wm)(V,{icon:"visibility",flat:"",dense:"",onClick:a=>l.$router.push(`/store/detail/${e.row.id}`)},null,8,["onClick"]),(0,o.Wm)(s.Z,{dense:"",onClick:l=>W(e.row)},null,8,["onClick"]),(0,o.Wm)(d.Z,{dense:"",color:"negative",icon:"delete",onClick:l=>_(e.row.id)},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1}),(0,o.Wm)(x,{modelValue:a.value,"onUpdate:modelValue":u[6]||(u[6]=l=>a.value=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{style:{width:"700px","max-width":"100vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{outlined:"",label:"Адрес",class:"q-mb-md",modelValue:b.value.address,"onUpdate:modelValue":u[1]||(u[1]=l=>b.value.address=l)},null,8,["modelValue"]),(0,o.Wm)(k,{outlined:"",label:"Организация",class:"q-mb-md",modelValue:b.value.organization,"onUpdate:modelValue":u[2]||(u[2]=l=>b.value.organization=l)},null,8,["modelValue"]),(0,o.Wm)(k,{outlined:"",label:"ФИО",class:"q-mb-md",modelValue:b.value.fio,"onUpdate:modelValue":u[3]||(u[3]=l=>b.value.fio=l)},null,8,["modelValue"]),(0,o.Wm)(k,{outlined:"",label:"Должность",class:"q-mb-md",modelValue:b.value.dolgnost,"onUpdate:modelValue":u[4]||(u[4]=l=>b.value.dolgnost=l)},null,8,["modelValue"]),(0,o.Wm)(k,{outlined:"",label:"Коментарий",type:"textarea",modelValue:b.value.comment,"onUpdate:modelValue":u[5]||(u[5]=l=>b.value.comment=l)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(y,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{label:"Сохранить",disable:!b.value.address,"no-caps":"",color:"positive",onClick:f},null,8,["disable"]),(0,o.wy)((0,o.Wm)(V,{label:"Отмена","no-caps":"",color:"dark"},null,512),[[H]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var v=a(9885),g=a(136),_=a(1746),W=a(1233),f=a(1682),q=a(7220),V=a(8879),h=a(2074),Z=a(4458),k=a(3190),C=a(3119),y=a(1821),Q=a(2146),x=a(9984),H=a.n(x);const T=b,U=T;H()(b,"components",{QPage:v.Z,QSpace:g.Z,QTable:_.Z,QTr:W.Z,QTh:f.Z,QTd:q.Z,QBtn:V.Z,QDialog:h.Z,QCard:Z.Z,QCardSection:k.Z,QInput:C.Z,QCardActions:y.Z}),H()(b,"directives",{ClosePopup:Q.Z})}}]);