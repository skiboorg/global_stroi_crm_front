"use strict";(globalThis["webpackChunkglobal_stroi_crm_front"]=globalThis["webpackChunkglobal_stroi_crm_front"]||[]).push([[983],{6983:(e,l,a)=>{a.r(l),a.d(l,{default:()=>z});a(2879);var n=a(9835),t=a(6970),u=a(499),o=a(1569),s=(a(8550),a(1862),a(9876));const i=(0,n._)("br",null,null,-1),r=(0,n._)("br",null,null,-1),p=(0,n._)("br",null,null,-1),d=(0,n._)("br",null,null,-1),m=(0,n._)("br",null,null,-1),_=(0,n._)("br",null,null,-1),c=(0,n._)("br",null,null,-1),w=(0,n._)("div",{class:"flex items-center justify-between q-mb-md"},[(0,n._)("p",{class:"no-margin text-h6 text-bold"},"Отчеты по пользователям")],-1),b={class:"text-bold"},f={__name:"index",setup(e){const l=(0,s.E)(),a=[{name:"firstname",align:"left",label:"ФИО",field:e=>e.fio,sortable:!0},{name:"username",align:"left",label:"Логин",field:e=>e.username,sortable:!0},{name:"role",align:"left",label:"Роль",field:e=>e.role?.name,sortable:!0},{name:"position",align:"left",label:"Телефон",field:e=>e.phone,sortable:!0}],f={sortBy:"desc",descending:!1,page:1,rowsPerPage:100},g=(0,u.iH)([]),v=(0,u.iH)([]),q=(0,u.iH)(!1),k=(0,u.iH)(null),h=(0,u.iH)({q:"",role__id:""}),W=async()=>{k.value?g.value=g.value.filter((e=>e.id===k.value)):g.value=await l.getUsers(`q=${h.value.q}&role__id=${h.value.role__id}`,!0)};(0,n.wF)((async()=>{await U(),v.value=await l.getUsers(null,!0)}));const U=async()=>{g.value=await l.getUsers(`q=${h.value.q}&role__id=${h.value.role__id}`,!0)},Q=(e,l)=>{l((async()=>{if(e){q.value=!q.value;const l=await(0,o.api)(`/api/user/user?q=${e}&page_size=10000`);v.value=l.data,q.value=!q.value}}))};return(e,l)=>{const u=(0,n.up)("q-card-section"),o=(0,n.up)("q-card"),s=(0,n.up)("q-expansion-item"),h=(0,n.up)("q-item-label"),U=(0,n.up)("q-item-section"),Z=(0,n.up)("q-item"),y=(0,n.up)("q-select"),x=(0,n.up)("q-th"),H=(0,n.up)("q-tr"),$=(0,n.up)("q-td"),C=(0,n.up)("q-table"),T=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(T,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{"expand-separator":"",icon:"help",label:"Описание раздела",class:"q-mb-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" В отчете сотрудника представлена сводная информация по количеству, качеству усилий, операционным и финансовым результатам. Автоматически система формирует данные по состоянию на вчерашний день. Сотрудник может выбрать любой произвольный период времени начиная с момента первой авторизации в системе."),i,r,(0,n.Uk)(" Финансовые показатели сотрудника состоят из двух:"),p,d,(0,n.Uk)(" 1. Заработная плата сотрудника на руки (начисленная сумма за один день работы сотрудника)"),m,(0,n.Uk)(" 2. Расходы организации на сотрудника (начисленная сумма за один день работы сотрудника плюс налоги и страховые взносы)"),_,c,(0,n.Uk)(" Финансовые показатели возможно посмотреть в разрезе минимум 1 (одного) рабочего дня. Для этого необходимо в фильтре изменить дату начала отчета на предыдущий день. Финансовые показатели рассчитываются путем деления заработной платы (расходов организации) в месяц на 22 (двадцать два) рабочих дня. Согласно производственного календаря среднее количество рабочих дней в году составляет 22 (двадцать два) дня. ")])),_:1})])),_:1})])),_:1}),w,(0,n.Wm)(y,{class:"q-mb-xs",dense:"",outlined:"",modelValue:k.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>k.value=e),W],loading:q.value,options:v.value,"option-label":"fio",label:"Выберите пользователя","map-options":"","option-value":"id","emit-value":"","use-input":"",onFilter:Q,clearable:""},{option:(0,n.w5)((e=>[(0,n.Wm)(Z,(0,t.vs)((0,n.F4)(e.itemProps)),{default:(0,n.w5)((()=>[(0,n.Wm)(U,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(e.opt.role?.name),1)])),_:2},1024),(0,n.Wm)(h,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Роль")])),_:1})])),_:2},1024),(0,n.Wm)(U,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(e.opt.fio),1)])),_:2},1024),(0,n.Wm)(h,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)("ФИО")])),_:1})])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","loading","options"]),(0,n.Wm)(C,{flat:"",rows:g.value,columns:a,"row-key":"name","hide-pagination":"","table-header-class":"table-header",pagination:f},{header:(0,n.w5)((e=>[(0,n.Wm)(H,{props:e,class:"bg-grey-2"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(l=>((0,n.wg)(),(0,n.j4)(x,{key:l.name,props:e},{default:(0,n.w5)((()=>[(0,n._)("span",b,(0,t.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,n.w5)((l=>[(0,n.Wm)(H,{props:l},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.cols,(a=>((0,n.wg)(),(0,n.j4)($,{key:a.name,onClick:a=>e.auth.user.role.permission.can_view?e.$router.push(`/reports/report/${l.row.id}`):null,props:l},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,t.zw)(a.value),1)])),_:2},1032,["onClick","props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})}}};var g=a(9885),v=a(651),q=a(4458),k=a(3190),h=a(6384),W=a(490),U=a(6749),Q=a(3115),Z=a(1746),y=a(1233),x=a(1682),H=a(7220),$=a(9984),C=a.n($);const T=f,z=T;C()(f,"components",{QPage:g.Z,QExpansionItem:v.Z,QCard:q.Z,QCardSection:k.Z,QSelect:h.Z,QItem:W.Z,QItemSection:U.Z,QItemLabel:Q.Z,QTable:Z.Z,QTr:y.Z,QTh:x.Z,QTd:H.Z})}}]);